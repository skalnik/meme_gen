express = require 'express'
routes = require '../app'

app = express.createServer();

app.configure ->
  app.use express.logger()
  app.use express.bodyParser()
  app.use express.methodOverride()
  app.use app.router

app.configure 'development', ->
  app.use express.errorHandler({ dumpExceptions: true, showStack: true })

app.configure 'production', ->
  app.use express.errorHandler()

port = process.env.port || 3000

app.listen port, ->
  console.log "Listening on #{port}"
